(function(){"use strict";var t={2474:function(t,e,r){r(6992),r(8674),r(9601),r(7727);var o=r(144),s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("div",{attrs:{id:"sort_search"}},[t._m(0),r("div",{directives:[{name:"show",rawName:"v-show",value:t.show_products||!this.len,expression:"show_products || !this.len"}],attrs:{id:"sort_panel"}},[r("Strong",[t._v("SORTING OPTIONS")]),r("select",{directives:[{name:"model",rawName:"v-model",value:t.sorty.type,expression:"sorty.type"}],on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.sorty,"type",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:""}},[t._v("Default")]),r("option",{attrs:{value:"P"}},[t._v("Price")]),r("option",{attrs:{value:"A"}},[t._v("Availability ")])]),r("br"),r("br"),r("br"),r("Strong",[t._v("ORDER BY")]),r("select",{directives:[{name:"model",rawName:"v-model",value:t.sorty.order_by,expression:"sorty.order_by"}],on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.sorty,"order_by",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:""}},[t._v("Default")]),r("option",{attrs:{value:"HL"}},[t._v("High to Low")]),r("option",{attrs:{value:"LH"}},[t._v("Low to High")])]),r("br"),r("br"),r("br"),r("input",{attrs:{type:"button",value:"SORT"},on:{click:t.sort_array}})],1),r("div",{directives:[{name:"show",rawName:"v-show",value:t.hideit,expression:"hideit"}],attrs:{id:"search_bar"}},[r("strong",[t._v("Search")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.search_term,expression:"search_term"}],attrs:{type:"text"},domProps:{value:t.search_term},on:{input:function(e){e.target.composing||(t.search_term=e.target.value)}}}),r("br")]),r("button",{directives:[{name:"show",rawName:"v-show",value:t.len,expression:"len"}],on:{click:t.show_cart}},[t._v(t._s(this.cart.length)+" Shopping Cart")]),r("br")]),r("div",{attrs:{id:"prods"}},[r("displayProducts",{directives:[{name:"show",rawName:"v-show",value:t.show_products,expression:"show_products"}],attrs:{courses:t.courses},on:{addproduct:t.add_to_cart}})],1),r("checkout",{directives:[{name:"show",rawName:"v-show",value:!t.show_products,expression:"!show_products"}],attrs:{cart:t.cart},on:{removefromcart:t.remove_from_cart,placeOrder:t.place_my_order}})],1)},n=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("header",[r("h1",[t._v(" Lesson store ")])])}],i=(r(1539),r(7327),r(4916),r(4723),r(8862),r(561),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._l(t.cart,(function(e){return r("div",{key:e.id},[r("div",{attrs:{id:"v_cart"}},[r("h2",[t._v(t._s(e.subject))]),r("p",[t._v(t._s(e.campus))]),r("p",[t._v(t._s(e.price))]),r("input",{attrs:{type:"button",value:"Remove"},on:{click:function(r){return t.remove_from_cart(e._id)}}})])])})),r("p",[t._v("First Name")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.order.first_name,expression:"order.first_name"}],attrs:{type:"text",id:"fname"},domProps:{value:t.order.first_name},on:{input:function(e){e.target.composing||t.$set(t.order,"first_name",e.target.value)}}}),r("br"),r("br"),r("p",[t._v("Last Name")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.order.last_name,expression:"order.last_name"}],attrs:{type:"text",id:"lname"},domProps:{value:t.order.last_name},on:{input:function(e){e.target.composing||t.$set(t.order,"last_name",e.target.value)}}}),r("br"),r("br"),r("p",[t._v("Phone Number")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.order.phone_number,expression:"order.phone_number"}],attrs:{type:"text",id:"phone"},domProps:{value:t.order.phone_number},on:{input:function(e){e.target.composing||t.$set(t.order,"phone_number",e.target.value)}}}),r("br"),r("br"),r("p",[t._v("Post Code")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.order.postcode,expression:"order.postcode"}],attrs:{type:"text",id:"postcode"},domProps:{value:t.order.postcode},on:{input:function(e){e.target.composing||t.$set(t.order,"postcode",e.target.value)}}}),r("br"),r("br"),r("p",[t._v("Address Line")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.order.address,expression:"order.address"}],attrs:{type:"text",id:"address"},domProps:{value:t.order.address},on:{input:function(e){e.target.composing||t.$set(t.order,"address",e.target.value)}}}),r("br"),r("br"),r("input",{directives:[{name:"show",rawName:"v-show",value:t.all_info,expression:"all_info"}],attrs:{type:"button",value:"Place Order"},on:{click:t.place_my_order}})],2)}),c=[],a=(r(7601),/^\d+\d*$/),u=/^[a-z]+[a-z]*$/,p={name:"checkOut",props:["cart"],data:function(){return{s_p:!this.show_products,order:{first_name:"",last_name:"",phone_number:"",postcode:"",address:"",items:[]}}},computed:{all_info:function(){return!!(a.test(this.order.phone_number)&&u.test(this.order.first_name)&&u.test(this.order.last_name))}},methods:{remove_from_cart:function(t){this.$emit("removefromcart",t)},place_my_order:function(){this.order.items=this.cart,this.$emit("placeOrder",this.order)}}},d=p,h=r(1001),l=(0,h.Z)(d,i,c,!1,null,null,null),m=l.exports,v=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",t._l(t.courses,(function(e){return r("div",{key:e.id},[r("div",{attrs:{id:"show_products"}},[r("img",{staticStyle:{width:"250px",height:"250px"},attrs:{src:e.image}}),r("h2",[t._v("Subject : "+t._s(e.subject))]),r("p",[t._v("Campus : "+t._s(e.campus))]),r("p",[t._v("Price : "+t._s(e.price))]),r("p",[t._v("Available Spaces : "+t._s(e.spaces))]),r("input",{attrs:{type:"button",value:"Add To Cart",disabled:e.A_D},on:{click:function(r){return t.addtocart(e._id)}}})])])})),0)},_=[],f={name:"displayProducts",props:["courses"],data:function(){return{coursesL:this.courses}},computed:{filtered_courses:function(){var t=this;return this.courses.filter((function(e){return e.subject.match(t.search_term)||e.campus.match(t.search_term)}))}},methods:{addtocart:function(t){this.$emit("addproduct",t)}}},y=f,w=(0,h.Z)(y,v,_,!1,null,null,null),g=w.exports,b={name:"app",components:{displayProducts:g,checkout:m},data:function(){return{hideit:!0,search_term:"",courses:[],show_products:!0,ref:!0,cart:[],len:!1,sorty:{type:"",order_by:""}}},created:function(){var t=this;fetch("https://cw3-main.herokuapp.com/collection/products").then((function(t){return t.json()})).then((function(e){return t.courses=e})).catch((function(t){return console.log(t.message)}))},watch:{search_term:function(){var t=this;fetch("https://cw3-main.herokuapp.com/collection/products"+this.search_term).then((function(t){return t.json()})).then((function(e){return t.courses=e})).catch((function(t){return console.log(t.message)}))}},computed:{filtered_courses:function(){var t=this;return this.courses.filter((function(e){return e.subject.match(t.search_term)||e.campus.match(t.search_term)}))},search_only:function(){return!0}},methods:{place_my_order:function(t){fetch("https://cw3-main.herokuapp.com/collection/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(t){console.log(t),alert("Order Placed Successfully")})),this.cart=[],this.len=!1,this.show_product=!0,this.hideit=!0},show_cart:function(){!0===this.show_products?(this.show_products=!1,this.hideit=!1):(this.show_products=!0,this.hideit=!0)},sort_array:function(){var t=this;"P"==this.sorty.type&&"HL"==this.sorty.order_by?fetch("https://cw3-main.herokuapp.com/collection/products/price/-1").then((function(t){return t.json()})).then((function(e){return t.courses=e})).catch((function(t){return console.log(t.message)})):"P"==this.sorty.type&&"LH"==this.sorty.order_by?fetch("https://cw3-main.herokuapp.com/collection/products/price/1").then((function(t){return t.json()})).then((function(e){return t.courses=e})).catch((function(t){return console.log(t.message)})):"A"==this.sorty.type&&"HL"==this.sorty.order_by?fetch("https://cw3-main.herokuapp.com/collection/products/price/-1").then((function(t){return t.json()})).then((function(e){return t.courses=e})).catch((function(t){return console.log(t.message)})):"A"==this.sorty.type&&"LH"==this.sorty.order_by&&fetch("https://cw3-main.herokuapp.com/collection/products/price/1").then((function(t){return t.json()})).then((function(e){return t.courses=e})).catch((function(t){return console.log(t.message)})),this.show_product=!1,this.show_product=!0},remove_from_cart:function(t){for(var e,r,o=0;o<this.cart.length;o++)this.cart[o]._id===t&&(e=this.cart.splice(o,1));for(0===this.cart.length&&(this.len=!1,this.show_products=!0,this.hideit=!0),o=0;o<this.courses.length;o++)this.courses[o]._id===e[0]._id&&(this.courses[o].spaces=this.courses[o].spaces+1,this.courses[o].A_D=!1,r=this.courses[o]);var s={spaces:r.spaces,A_D:r.A_D};fetch("https://cw3-main.herokuapp.com/collection/products/"+r._id,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then((function(t){console.log(t)}))},add_to_cart:function(t){for(var e=0;e<this.courses.length;e++)if(this.courses[e]._id===t&&(this.cart.push(this.courses[e]),this.len=!0,this.courses[e].spaces>0)){this.courses[e].spaces=this.courses[e].spaces-1,0===this.courses[e].spaces&&(this.courses[e].A_D=!0);var r={spaces:this.courses[e].spaces,A_D:this.courses[e].A_D};fetch("https://cw3-main.herokuapp.com/collection/products/"+this.courses[e]._id,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then((function(t){console.log(t)}))}}}},x=b,O=(0,h.Z)(x,s,n,!1,null,null,null),k=O.exports;o.Z.config.productionTip=!1,new o.Z({render:function(t){return t(k)}}).$mount("#app")}},e={};function r(o){var s=e[o];if(void 0!==s)return s.exports;var n=e[o]={exports:{}};return t[o](n,n.exports,r),n.exports}r.m=t,function(){var t=[];r.O=function(e,o,s,n){if(!o){var i=1/0;for(p=0;p<t.length;p++){o=t[p][0],s=t[p][1],n=t[p][2];for(var c=!0,a=0;a<o.length;a++)(!1&n||i>=n)&&Object.keys(r.O).every((function(t){return r.O[t](o[a])}))?o.splice(a--,1):(c=!1,n<i&&(i=n));if(c){t.splice(p--,1);var u=s();void 0!==u&&(e=u)}}return e}n=n||0;for(var p=t.length;p>0&&t[p-1][2]>n;p--)t[p]=t[p-1];t[p]=[o,s,n]}}(),function(){r.d=function(t,e){for(var o in e)r.o(e,o)&&!r.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};r.O.j=function(e){return 0===t[e]};var e=function(e,o){var s,n,i=o[0],c=o[1],a=o[2],u=0;if(i.some((function(e){return 0!==t[e]}))){for(s in c)r.o(c,s)&&(r.m[s]=c[s]);if(a)var p=a(r)}for(e&&e(o);u<i.length;u++)n=i[u],r.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return r.O(p)},o=self["webpackChunklessonstrore"]=self["webpackChunklessonstrore"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=r.O(void 0,[998],(function(){return r(2474)}));o=r.O(o)})();
//# sourceMappingURL=app-legacy.aa2478af.js.map